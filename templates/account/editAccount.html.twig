{% extends 'base.html.twig' %}

{% block body %}
    <div class="slim-pageheader">
        <ol class="breadcrumb slim-breadcrumb">
            <li class="breadcrumb-item"><a href="#">Tableau de bord</a></li>
            <li class="breadcrumb-item"><a href="#">Utilisateurs</a></li>
            <li class="breadcrumb-item active" aria-current="page">Profil</li>
        </ol>
        <h6 class="slim-pagetitle">Changer mot de passe</h6>
    </div><!-- slim-pageheader -->
    <div class="section-wrapper">
        <div class="form-layout">
            {{ form_start(form) }}
            <div class="row mg-b-25">
                <div class="col-lg-6">
                    {{ form_row(form.username) }}
                </div><!-- col-4 -->
                <div class="col-lg-6">
                    {{ form_row(form.fullName) }}
                </div>
                <div class="col-lg-6">
                    {{ form_row(form.address) }}
                </div>
                <div class="col-lg-6">
                    {{ form_row(form.phone) }}
                </div>
            </div><!-- row -->
            <div class="row">
                <div class="col-lg-9">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.userRole) }}
                        </div>
                        <div class="col-lg-12">
                            {{ form_row(form.imageFile) }}
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-3 mg-t-20 mg-sm-t-0">
                    <img src="{% if user.imageName is not null %}{{ vich_uploader_asset(user) }}{% else %}{{ asset('assets/img/img0.jpg') }}{% endif %}" class="img-fluid rounded" alt="{{ user.fullName }}" id="selectedImage">
                </div><!-- col -->
            </div>
            <div class="row">
                <div class="col-lg-12">
                    {{ form_row(form.description) }}
                </div>
            </div>
            <div class="form-layout-footer">
                <button class="btn btn-primary bd-0" type="submit">Valider</button>
                <button class="btn btn-secondary bd-0" type="reset">Annuler</button>
            </div><!-- form-layout-footer -->
            {{ form_end(form) }}
        </div><!-- form-layout -->
    </div><!-- section-wrapper -->
{% endblock %}
{% block javascripts %}
    <script>
        const imageInput = document.getElementById('edit_account_imageFile');
        const selectedImage = document.getElementById('selectedImage');

        imageInput.addEventListener('change', function () {
            const file = imageInput.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function (event) {
                    selectedImage.src = event.target.result;
                    //selectedImage.style.display = 'block';
                }

                reader.readAsDataURL(file);
            }
        });
    </script>
{% endblock %}
